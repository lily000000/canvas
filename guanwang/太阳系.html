<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <canvas id="canvas" width="800" height="800"></canvas>
    <script>
      var canvas=document.getElementById("canvas")
      var sun = new Image();
      var moon = new Image();
      var earth = new Image();
      function init(){
        sun.src = 'https://mdn.mozillademos.org/files/1456/Canvas_sun.png';
        moon.src = 'https://mdn.mozillademos.org/files/1443/Canvas_moon.png';
        earth.src = 'https://mdn.mozillademos.org/files/1429/Canvas_earth.png';
        window.requestAnimationFrame(draw);
      }init();

      function draw(){
        var ctx = document.getElementById('canvas').getContext('2d');
        ctx.globalCompositeOperation = 'destination-over';//组合图像
        ctx.clearRect(0,0,300,300); // 在一个图像上面掏空  一部分内容
        ctx.fillStyle = 'rgba(0,0,0,0.4)';//填充的颜色
        ctx.strokeStyle = 'rgba(0,153,255,0.4)';
        ctx.save();//储存一次画好的内容
        ctx.translate(150,150);//旋转
        var time = new Date();//时间对象
        ctx.rotate( ((2*Math.PI)/60)*time.getSeconds() + ((2*Math.PI)/60000)*time.getMilliseconds() );//旋转
        ctx.translate(105,0);//转换画布的用户坐标系统。
        ctx.fillRect(0,-12,50,24); // Shadow 阴影
        ctx.drawImage(earth,-12,-12);//在画布上放图片或视频 后面两个参数是距离画布的x和y轴的坐标
        ctx.save();//储存到栈里面一次画好的内容
        ctx.rotate( ((2*Math.PI)/6)*time.getSeconds() + ((2*Math.PI)/6000)*time.getMilliseconds() );//旋转
        ctx.translate(0,28.5);//转换画布的用户坐标系统。
        ctx.drawImage(moon,-3.5,-3.5);//在画布上放图片或视频 后面两个参数是距离画布的x和y轴的坐标
        ctx.restore();//方法从栈中弹出存储的图形状态并恢复 CanvasRenderingContext2D 对象的属性、剪切路径和变换矩阵的值。

        ctx.restore();//方法从栈中弹出存储的图形状态并恢复 CanvasRenderingContext2D 对象的属性、剪切路径和变换矩阵的值。

        ctx.beginPath();
        ctx.arc(150,150,105,0,Math.PI*2,false); // Earth orbit
        ctx.stroke();

        ctx.drawImage(sun,0,0,300,300);

        window.requestAnimationFrame(draw);

      }
//   function draw() {
//   var ctx = document.getElementById('canvas').getContext('2d');
//
//   ctx.globalCompositeOperation = 'destination-over';
//   ctx.clearRect(0,0,300,300); // clear canvas
//
//   ctx.fillStyle = 'rgba(0,0,0,0.4)';
//   ctx.strokeStyle = 'rgba(0,153,255,0.4)';
//   ctx.save();
//   ctx.translate(150,150);
//
//   // Earth
//   var time = new Date();
//   ctx.rotate( ((2*Math.PI)/60)*time.getSeconds() + ((2*Math.PI)/60000)*time.getMilliseconds() );
//   ctx.translate(105,0);
//   ctx.fillRect(0,-12,50,24); // Shadow
//   ctx.drawImage(earth,-12,-12);
//
//   // Moon
//   ctx.save();
//   ctx.rotate( ((2*Math.PI)/6)*time.getSeconds() + ((2*Math.PI)/6000)*time.getMilliseconds() );
//   ctx.translate(0,28.5);
//   ctx.drawImage(moon,-3.5,-3.5);
//   ctx.restore();
//
//   ctx.restore();
//
//   ctx.beginPath();
//   ctx.arc(150,150,105,0,Math.PI*2,false); // Earth orbit
//   ctx.stroke();
//
//   ctx.drawImage(sun,0,0,300,300);
//
//   window.requestAnimationFrame(draw);
// }
    </script>
  </body>
</html>
